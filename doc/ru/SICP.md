# ru/ SICP: Структура и интерпретация компьютерных программ

http://www.sicpdistilled.com основано на адаптации [оригинальной SICP](https://mitpress.mit.edu/sites/default/files/sicp/full-text/book/book.html) для [языка Clojure](https://clojurecourse.by/), расширенной для [языка metaL](https://repl.it/@metaLmasters/metaL) (мета-расширение для Python)

Для параллельной работы с обоими языками *локально* в системе нужно
установить:
```sh
~$ sudo apt install clojure leiningen
~$ sudo apt install git make python3-venv
~$ git clone -o gh https://github.com/ponyatov/metaL.git
~$ cd metaL ; make install
```
```sh
~$ lein repl

nREPL server started on port 34163 on host 127.0.0.1 - nrepl://127.0.0.1:34163
REPL-y 0.4.3, nREPL 
Clojure 1.10.0
OpenJDK 64-Bit Server VM 11.0.8+10-post-Debian-1deb10u1
    Docs: (doc function-name-here)
          (find-doc "part-of-name-here")
  Source: (source function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
    Exit: Control+D or (exit) or (quit)
 Results: Stored in vars *1, *2, *3, an exception in *e

user=> 
```
Для работы online достаточно зайти в песочницу на https://repl.it/@metaLmasters/metaL
```
Python 3.8.2 (default, Feb 26 2020, 02:56:10)
> pwd
/home/runner/metaL
```
```
> make install
> bin/python3 -i metaL.py

<vm:metaL> #10e7d970 @7f38abc26070
    ABOUT = <string:homoiconic metaprogramming system\n* powered by `metaL`> #0dfa5b4e @7f38abc26580
    vm = <vm:metaL> #10e7d970 @7f38abc26070 _/

<vm:metaL> _
```
```
> clojure

Downloading: org/clojure/clojure/1.10.1/clojure-1.10.1.pom from https://repo1.maven.org/maven2/
Downloading: org/clojure/spec.alpha/0.2.176/spec.alpha-0.2.176.pom from https://repo1.maven.org/maven2/
Downloading: org/clojure/pom.contrib/0.2.2/pom.contrib-0.2.2.pom from https://repo1.maven.org/maven2/
Downloading: org/clojure/core.specs.alpha/0.2.44/core.specs.alpha-0.2.44.pom from https://repo1.maven.org/maven2/
Downloading: org/clojure/clojure/1.10.1/clojure-1.10.1.jar from https://repo1.maven.org/maven2/
Downloading: org/clojure/spec.alpha/0.2.176/spec.alpha-0.2.176.jar from https://repo1.maven.org/maven2/
Downloading: org/clojure/core.specs.alpha/0.2.44/core.specs.alpha-0.2.44.jar from https://repo1.maven.org/maven2/
Clojure 1.10.1
user=> _
```

## [metaL](md_doc_ru_metaL.html)

`metaL` на самом деле это **два** языка:
* `metaL`-скрипт со своим синтаксисом, опционален, и находится в зайчаточном
  состоянии (использовать не будем)
* `metaL` как он изначально задумывался: no-syntax **язык определённый на
  данных** (в виде *самоинтерпретируемых структур данных* реализованных на
  Python)

`metaL` задумывался как модуль расширения Python, который использует рантайм
CPython3, интерпретатор и синтаксис Python включая REPL, и **объектный граф**
как универсальную структуру для представления одновременно и программ и данных.
Python как язык очень прост в освоении, но крайне ограничен, и неприменим в
чистом виде для некоторых приложений (микроконтроллеры, используемые в
приложениях IoT, системы жёсткого реального времени, компактные приложения и
`unikernel` микроОС для виртуальных сред).

Предполагается, что `metaL`
* может быть реализован как *гостевой язык данных* на любом удобном для
  программиста **хост-языке** (предпочтительны динамические с REPL: Python,
  Lisp/Clojure, PHP), в виде [гомоиконичного](https://ru.wikipedia.org/wiki/%D0%93%D0%BE%D0%BC%D0%BE%D0%B8%D0%BA%D0%BE%D0%BD%D0%B8%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C) *интерпретатора структур данных*
* специальный синтаксис не используется, для работы с `metaL` применяется REPL и
  синтаксис хост-языка, особенно для написания различных **трансформаций** и
  методов, по крайней мере пока `metaL` не станет достаточно зрелым чтобы быть
  переписанным на самом себе
* основной и единственный метод: *гетерогенное генеративное*
  **мета-программирование**
  * на `metaL` **описываются модели** проектируемых приложений, 
    программно-аппаратаных систем, *модели предметной области*, методы преобразования моделей
  * полученные прикладные модели транслируются в компилируемые модели (AST,
    атрибутные грамматики) **целевого языка программирования**
  * *компилируемые модели* транслируются в произвольно выбранный 1+ целевой
    язык, с которым работает команда разработчиков
  * полученный исходный код компилируется *backend-компилятором* (gcc, javac,..)
    и интегрируется с любыми существующими системами и инструментами
  * за счёт разделения host-языка разработки и моделирования (используется
    только в design time), и target-языка реализации (compile/runtime),
    избавляемся от блокировок по инструментарию, и необходимости заставлять всю
    команду учить и поддерживать еще один птичий язык
* главная задача `metaL`: **создание неограниченно-расширяемой языковой среды**
  для проектирования и моделирования, в которой разработчик может самостоятельно
  реализовать и применять любые подходы и методы программирования, не
  ограничиваясь возможностями хост-языка, и не имея жёсткой привязки к целевому
  стеку (язык, runtime, библиотеки, фреймворки, ОС, СУБД, схема развёртывания, и
  т.д.).
* для проектов использующих динамические хост-языки, возможно использование
  `metaL` в рантайме в **режиме симуляции**, но такое использование допускается
  только для прототипирования, сбора статистики, оптимизации и отладки. Никаких
  средств контроля типов, управления доступом к памяти и ресурсам в `metaL` не
  планируется, поэтому при взломе приложения работающего в режиме симуляции
  атакующий получает полный неограниченный доступ. В случае ошибок поведение
  системы непредсказуемо, и возможны любые повреждения данных. Целевая
  компиляция моделей добавляет средства контроля кода, доступные для
  backend-компилятора (как минимум проверку типов), и код безопасности
  предусмотренный разработчиком и авторами `metaL`-библиотек.

## SICP: Wizard Book / Книга волшебника

Книга волшебника, или SICP -- отличный учебник по информатике, использовавшийся
во вводных курсах Массачусетского технологического института. Эта книга так
называется из-за колдуна на обложке. Одна из библий мира Lisp-подобных языков.

Peter Norvig: Если использовать аналогию, если бы SICP была бы про автомобили,
она была бы написана для человека, который хочет знать, как работают автомобили,
как они построены и как можно разработать экономичные, безопасные и надежные
автомобили для 21 века. Люди, ненавидящие SICP, это те, кто просто хочет знать,
как водить машину по шоссе, как и все остальные.

*Для нас эта книга важна не только для понимания общих принципов вычисления, но
и как редкий источник знаний как функциональные языки программирования устроены
внутри, что мы можем взять для интеграции в `metaL`, и как этим пользоваться.*

## PLAI: Programming Languages: Application and Interpretation

https://www.plai.org

Эта и следующая книги ориентируются исключитально на реализации Lisp-подобного языка ([первая редакция](http://cs.brown.edu/~sk/Publications/Books/ProgLangs/2007-04-26/)), 

## [PAPL](md_doc_ru_PAPL.html): Programming and Programming Languages

https://papl.cs.brown.edu/2020/

Книга отличается от PLAI использованием хост-языка `Pyret`, который по своей
модели языка достаточно близок к Python. Начинать предпочтительнее с этой книги,
так как она проще чем [SICP](md_doc_ru_SICP.html).

[перейти](md_doc_ru_PAPL.html)
