<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>metaL/py: Tutorial</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">metaL/py
   </div>
   <div id="projectbrief">Repl.it Programming Language Jam</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>see also <a href="modules.html">modules</a> and <a href="index.html">main page</a> (<a class="el" href="README_8md.html">README.md</a>)</p>
<hr/>
<p>The <code><a class="el" href="namespacemetaL.html">metaL</a></code> (meta)programming language was designed as a mix of Lisp and Python, not of syntax, but to get feels of language abilities.</p>
<ul>
<li><em>Python</em> is simple to use and have very friendly syntax</li>
<li><em>Lisp</em> has a power of self-modification able to change program in runtime</li>
<li><em>Smalltalk</em> is pure OOP-language works over message passing which is good for distributed and parallel systems</li>
</ul>
<p><code><a class="el" href="namespacemetaL.html">metaL</a></code> <b>targets</b> not on writing application programs, but <b>on writing programs that generate other programs</b> (into C code which can be compiled and run on any computer system).</p>
<p>Don't try to write something which must be fast like number crunching or game engine &ndash; <code><a class="el" href="namespacemetaL.html">metaL</a></code> just does not work like that, and was not designed to be fast. It was created for manipulations with program structures, and you can write extra fast programs in <code><a class="el" href="namespacemetaL.html">metaL</a></code> if you use it a right way: for source code generation of your application.</p>
<hr/>
<h3>System startup</h3>
<ul>
<li>installation <div class="fragment"><div class="line">~$ git clone -o gh https://github.com/ponyatov/metaL</div><div class="line">~$ cd metaL</div><div class="line">~/metaL$ make install</div></div><!-- fragment --></li>
<li>interactive with <a class="el" href="group__repl.html#gaa68c3f209a9f835f178bd690f7636edc">REPL()</a> autorun <div class="fragment"><div class="line">~/metaL$ make metaL/repl</div></div><!-- fragment --></li>
<li>in Python-only mode: press [Ctrl]+[C] to exit into Pyhon interactive console <div class="fragment"><div class="line">/home/ponyatov/metaL/bin/python3 -i metaL.py</div><div class="line"></div><div class="line">&lt;vm:metaL&gt; #14ee5988 @7f12f298b128</div><div class="line">        ABOUT = &lt;string:homoiconic metaprogramming system\n* powered by `metaL`&gt; #0dfa5b4e @7f12f298b5f8</div><div class="line"></div><div class="line">&lt;vm:metaL&gt; Ctrl+C</div><div class="line"></div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;metaL.py&quot;, line 1246, in &lt;module&gt;</div><div class="line">    REPL()</div><div class="line">  File &quot;metaL.py&quot;, line 1228, in REPL</div><div class="line">    command = input(vm.head(test=True) + &#39; &#39;)</div><div class="line">KeyboardInterrupt</div><div class="line">&gt;&gt;&gt; print(&#39;Python&#39;)</div><div class="line">Python</div><div class="line">&gt;&gt;&gt;</div></div><!-- fragment --></li>
</ul>
<h3><code><a class="el" href="namespacemetaL.html">metaL</a></code> DDL/DML script</h3>
<ul>
<li><b>only single line syntax</b> can be used for every command /Python <code>input()</code> limitation in <a class="el" href="group__repl.html#gaa68c3f209a9f835f178bd690f7636edc">REPL()</a> /</li>
<li>can be run in Python mode as string via function <a class="el" href="group__repl.html#gadca7f71af965e163dd4eb02731ea6043">metaL()</a> <div class="fragment"><div class="line">comment = <span class="stringliteral">&#39; # line comment &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(comment)</div></div><!-- fragment --> <div class="fragment"><div class="line">integer = <span class="stringliteral">&#39; -01 # integer &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(integer)</div></div><!-- fragment --></li>
<li>can be interactively executed after <a class="el" href="group__repl.html#gaa68c3f209a9f835f178bd690f7636edc">REPL()</a> start</li>
</ul>
<p>Recommended use is running under any IDE can send selected code from a text editor to running terminal session with active REPL. After all code were tested in an interactive shell, it can be saved, and system should be restarted for changes commit.</p>
<h3>Literals</h3>
<p>Some set of language elements can be inputted directly, which are called literals. They are numbers, strings, and symbols.</p>
<ul>
<li>numbers <div class="fragment"><div class="line">number = <span class="stringliteral">&#39; +02.30 # floating point &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(number)</div></div><!-- fragment --> <div class="fragment"><div class="line">integer = <span class="stringliteral">&#39; -01 # integer &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(integer)</div></div><!-- fragment --> <div class="fragment"><div class="line">ihex = <span class="stringliteral">&#39; 0xDeadBeef # hexadecimal &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(ihex)</div></div><!-- fragment --> <div class="fragment"><div class="line">ibin = <span class="stringliteral">&#39; 0b1101 # binary &#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(ibin)</div></div><!-- fragment --></li>
<li>strings <div class="fragment"><div class="line">simple = <span class="stringliteral">&quot; &#39;single line\n\twith escaped chars&#39; &quot;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(simple)</div></div><!-- fragment --> Multiline strings can be parsed, but it is not an exception from the single-lined syntax, as REPL can't correctly input such strings. The only way to input them is by using <code><a class="el" href="group__repl.html#gadca7f71af965e163dd4eb02731ea6043" title="process command/script (in optional DDL/DML syntax) ">metaL()</a></code> in Python mode. <div class="fragment"><div class="line">multiline = <span class="stringliteral">&quot;&quot;&quot; &#39;multiple lines</span></div><div class="line"><span class="stringliteral">\twith escaped chars&#39;</span></div><div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(multiline)</div></div><!-- fragment --></li>
<li>symbols: any none-space char groups <div class="fragment"><div class="line">symbol = <span class="stringliteral">&#39;MODULE&#39;</span></div><div class="line"><a class="code" href="namespacemetaL.html">metaL</a>(symbol)</div></div><!-- fragment --> The <code>Symbol</code> type differs from other literals: most of them evaluate to itself, but <b>symbols will do a lookup in current computation context</b> as a variable name in other programming languages. <div class="fragment"><div class="line">&lt;vm:metaL&gt; MODULE</div><div class="line"></div><div class="line">&lt;symbol:MODULE&gt; #8b2b5473 @7f54949d8048</div><div class="line"></div><div class="line">&lt;module:metaL&gt; #d80c934b @7f5494ffab38</div><div class="line"></div><div class="line">&lt;vm:metaL&gt; #14ee5988 @7f5494ffa710</div><div class="line">        ABOUT = &lt;string:homoiconic metaprogramming system\n* powered by `metaL`&gt; #0dfa5b4e @7f5494ffabe0</div><div class="line">------------------------------------------------------------------</div><div class="line">&lt;vm:metaL&gt;</div></div><!-- fragment --></li>
</ul>
<h3>REPL cycle</h3>
<p>Read-Eval-Print-Loop runs in three stages after every line in the source code string were split by new line chars (besides multiline strings): </p><div class="fragment"><div class="line">&gt;&gt;&gt; <a class="code" href="namespacemetaL.html">metaL</a>(<span class="stringliteral">&#39; -01 \n +2.30 &#39;</span>)</div><div class="line"></div><div class="line">  &lt;ast:&gt;</div><div class="line">    &lt;op:-&gt; <span class="comment">#f70b8dac @7f01078ac080</span></div><div class="line">      0: &lt;integer:1&gt; <span class="comment">#47696a48 @7f01078ac1d0</span></div><div class="line">    &lt;op:+&gt; <span class="comment">#63257116 @7f01078ac320</span></div><div class="line">      0: &lt;number:2.3&gt; <span class="comment">#c4287bc0 @7f01078ac400</span></div></div><!-- fragment --><ol type="1">
<li>pure parsing: every line will be parsed into an AST (Abstract Syntax Tree) combined from the <code><a class="el" href="namespacemetaL.html">metaL</a></code> objects <div class="fragment"><div class="line">&lt;op:-&gt; #f70b8dac @7f01078ac080</div><div class="line">   0: &lt;integer:1&gt; #47696a48 @7f01078ac1d0</div></div><!-- fragment --></li>
<li>evaluation: <code><a class="el" href="namespacemetaL.html">metaL</a></code> objects composite structure runs via <code>eval</code>/<code>apply</code> methods <div class="fragment"><div class="line">&lt;integer:-1&gt; #d85c1811 @7f905edd3e10</div></div><!-- fragment --></li>
<li>When you run <code><a class="el" href="namespacemetaL.html">metaL</a></code> scripts via an interactive shell, every line will be printed as parsed-only AST and evaluated object, followed by the current VM state. <div class="fragment"><div class="line">&lt;vm:metaL&gt; #14ee5988 @7fc7328d7828</div><div class="line">   ABOUT = &lt;string:homoiconic metaprogramming system\n* powered by `metaL`&gt; #0dfa5b4e @7fc7328d7cf8</div><div class="line">   ...</div><div class="line">   vm = &lt;vm:metaL&gt; #14ee5988 @7fc7328d7828 _/</div></div><!-- fragment --></li>
</ol>
<h3>Variables/Slots</h3>
<ul>
<li>Any Symbol evaluates as the value, stored in a named attribute of the <em>computation context</em>.</li>
<li>The default <em>computation context</em> resides in the global <code>&lt;vm:<a class="el" href="namespacemetaL.html">metaL</a>&gt;</code> object.</li>
<li>Also, <em>any object can be treated as computation context</em> by passing it as a parameter for <code>.eval()</code>/<code>.apply()</code> methods.</li>
</ul>
<p>The <em>computation context</em> here means any object, which holds <b>bindings</b> between <em>names</em> and <em>values</em>. In mainstream programming languages, such bindings are called "variable".</p>
<p>In <code><a class="el" href="namespacemetaL.html">metaL</a></code> the term <b>variable</b> is planned to be used in another context (closer to Prolog language), so we'll call these bindings as <b>slots</b> the same as this <code>Object.slot</code> dict field is named.</p>
<p>For people already have some previous programming skills, multiple variable variants in the <code><a class="el" href="namespacemetaL.html">metaL</a></code> language can be confusing:</p><ul>
<li><b>slot</b>: binding between the name and its value was defined as some object attribute</li>
<li><b>variable</b>: represents source code variables in target programming languages</li>
<li><b>unifying variable</b>: /planned/ Prolog-like variable works with backtracking inference/pattern matching</li>
</ul>
<h3><code><a class="el" href="namespacemetaL.html">metaL</a></code> ingrained complexity: metaprogramming impact</h3>
<p>As you can see above, even at such a basis point as variables <code><a class="el" href="namespacemetaL.html">metaL</a></code> has more complexity than mainstream languages especially such easy as Python. It can be understood from the idea and nature of the <code><a class="el" href="namespacemetaL.html">metaL</a></code> as it strictly targets on the <b>metaprogramming</b>: <em>programs that write other programs</em>. When we speak about some language such as Python: we are going to write some code, which solves your single application tasks. In contrast, programming in <code><a class="el" href="namespacemetaL.html">metaL</a></code> means: we should write some code, which will <em>generate other program source code</em> in any other mainstream language (Python, C++, Java,..).</p>
<p>In <code><a class="el" href="namespacemetaL.html">metaL</a></code> we are not implementing the application, but we mostly should write <b>generic code templates</b> for making a set of different applications resides in some class. For example, somebody works in some narrow job areas such as Web development. He was hired to write a lot of applications, which shares up to 50-95% of source code from project to project, and/or from customer to customer (accounting software, logistics, small business web portals, webshops, etc. such a like). These code patterns especially meaningful for freelance development, when you have a lot of tiny clients, who want every time something special, but mostly the same. And tadaam! every client requires from you to write this supermegasite for his own language stack (Python/Django, Node.js, PHP legacy, Java/Spring,..). And anyway, you must synchronize your code models between backend (Python) and frontend (JavaScript) languages.</p>
<p>So, you spend your lifetime in rewriting notable amount of code, which is sometimes similar and sometimes just the same, by copypasting it between projects, doing some monkey patching to match models, syntax or names in your app, writing API documentation, propagating changes in this API and data scheme between many parts of your app, moving code fixes and enhances between multiple apps, etc. It does not look a good way to spend such a lot of time on mechanical work in place of thinking and experimenting with your app models and ideas.</p>
<p>Also, we have here yet another big problem: programming languages Babylon. You are forced to use some programming stack by your team and employer. Even if you take some magic language tool like Python, Clojure/Lisp, or Haskell, in which you can write as you think, you have no chances to push it into production use. Nobody in your team doesn't want to learn yet another ancient or esoteric language, and especially take hiring risks when you'll jump out or project expands. Even if you are lucky enough to work in your favorite programing language which is mainstream, or your team even lets you use something strange like Lisp or Smalltalk, and you spent months or few years in writing of some extra cool framework which helps you do anything fast and easy, BANG! you must move to another language because of the next customer or management decision, and you lost all of your jigs an polished clutches and start from scratch.</p>
<p>So, the <code><a class="el" href="namespacemetaL.html">metaL</a></code> is an experiment in finding a workaround in such a class of problems. The idea is about using some sort of <a href="https://en.wikipedia.org/wiki/Model-driven_engineering">Model-Driven Development</a> but not using such stoned <a href="https://www.omg.org/about/index.htm">OMG</a> (Oh My God!) standards. Maybe it can be abbreviated as "Write Templates Freely" in place of. <code><a class="el" href="namespacemetaL.html">metaL</a></code> <em>uses (meta)language-based approach</em> in place of traditional and dead-brained GUI monkey clicking. I'm not confronted against the GUI, it is just the same order of magnitude more complex to implement than metalanguage interpreter is more flexible and powerful. I mean the flexibility of interactive development and power of reflection in Smalltalk systems, and self-appliance magic in Lisp-like languages.</p><ul>
<li>generalize source code in arbitrary programming languages as typed data structures (attributed+ordered object tree/graph)</li>
<li>provide Turing-complete (and handy!) interpreter works over these data structures to do structure self-modifications</li>
<li>many data/program element types are able to recompile itself into 1+ mainstream programming languages</li>
</ul>
<p>If you look now in the one section above, you can understand the problem: even simple programming term such as variable or function, must be representable <em>and distinguishable</em> at least for <code><a class="el" href="namespacemetaL.html">metaL</a></code> level, and for syntax of the <b>target language</b> (into which you want to <a href="https://en.wikipedia.org/wiki/Executable_UML#Model_compilation">model-compile</a> your software). Also, we can't forget about the <b>host language</b> in which your <code><a class="el" href="namespacemetaL.html">metaL</a></code> fork was implemented: its selection is governed by your preferences and wishes, as at least for the first time you will be writing all <b>transformations</b> in this programming language, not in <code><a class="el" href="namespacemetaL.html">metaL</a></code>. Definitely, you will not use some compile-only or low-level language such as ANSI C or Java as a host language. It should be high-level, maybe without hard type checking (debatable), extendable, must have a rich set of data structures in a language core, and should support class-based OOP (due to <code><a class="el" href="namespacemetaL.html">metaL</a></code> design). Some candidates for a host language are Python (as widely known) and Clojure (as Lisp dialect over JVM).</p>
<p>Also, you must not forget then <code><a class="el" href="namespacemetaL.html">metaL</a></code> has two forms.</p>
<p>First, the pure <em>data-in-memory no-syntax language</em> available only from the host language layer.</p><ul>
<li>Please note again: <b>data structures defined and manipulated in Python is the primary form of <code><a class="el" href="namespacemetaL.html">metaL</a></code> programs</b>.</li>
<li><b>There is no data/program differentiation</b>: any program is a data structure, and every data structure is executable by <code><a class="el" href="namespacemetaL.html">metaL</a></code> interpreter, both is the same.</li>
</ul>
<p>Secondary, <em>script form</em> can be <em>optionally</em> used as single-line CLI commands and for storing <code><a class="el" href="namespacemetaL.html">metaL</a></code> programs/data in plain text files. This <code><a class="el" href="namespacemetaL.html">metaL</a></code> language form has more or less simple syntax, can be stored in files, edited in any IDE/text editor, and shared via <code>git</code> or any other version control software and tools. While <code><a class="el" href="namespacemetaL.html">metaL</a></code> evolves, its scripts can maybe become the main form you are working with (in complex with REPL in the running interactive system). But now and a long time later, <code><a class="el" href="namespacemetaL.html">metaL</a></code> script can't provide all methods required for your knowledge graph definitions and transformations. Here, KG means structures that describe your models, existing source code, generated source code, methods of transformations, class/type taxonomy,... anything you want to remember and process in software (and hardware?) [co]development. So, programming in <code><a class="el" href="namespacemetaL.html">metaL</a></code> means a <em>special method of programming in Python</em>, or any other host language, if you want to implement your own <code><a class="el" href="namespacemetaL.html">metaL</a></code> version in it (Haskell maybe? 8-).</p>
<p>Finally, we have to think about <b>four (!) languages</b> in every tiny meta-project, <b>and model graph</b> in memory. It is even good if this languages are different &ndash; you can distinguish them at least syntactically. The worst-case when you are trying to reimplement the <code><a class="el" href="namespacemetaL.html">metaL</a></code> in itself (bootstrap),</p>
<div class="image">
<object type="image/svg+xml" data="tutorial.svg">tutorial.svg</object>
</div>
<p>I'm unconditionally sure that your brain already boils only reading this text. If you look at the <code><a class="el" href="namespacemetaL.html">metaL</a></code> as yet another fun little language, just skip it to next section and return after much practice later. Avoid the <code><a class="el" href="namespacemetaL.html">metaL</a></code> complexity by ignoring its targets. Play with scripting, or think in <code><a class="el" href="namespacemetaL.html">metaL</a></code>-in-Python, as a description of your program model, and running this model interactively. This <em>model simulation</em> is a variant of <code><a class="el" href="namespacemetaL.html">metaL</a></code> use, which can be used for your model testing, requirements verification, or even in production (in case if you host and target languages can match). </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
